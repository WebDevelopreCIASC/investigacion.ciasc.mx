(function(a){a.fn.extend({openModal:function(c){var d=this;var b=a('<div id="lean-overlay"></div>');a("body").append(b);var e={opacity:0.5,in_duration:350,out_duration:250,ready:undefined,complete:undefined,dismissible:true};c=a.extend(e,c);if(c.dismissible){a("#lean-overlay").click(function(){a(d).closeModal(c);});a(document).on("keyup.leanModal",function(f){if(f.keyCode===27){a(d).closeModal(c);}});}a(d).find(".modal-close").click(function(f){a(d).closeModal(c);});a("#lean-overlay").css({display:"block",opacity:0});a(d).css({display:"block",opacity:0});a("#lean-overlay").velocity({opacity:c.opacity},{duration:c.in_duration,queue:false,ease:"easeOutCubic"});if(a(d).hasClass("bottom-sheet")){a(d).velocity({bottom:"0",opacity:1},{duration:c.in_duration,queue:false,ease:"easeOutCubic",complete:function(){if(typeof(c.ready)==="function"){c.ready();}}});}else{a(d).css({top:"4%"});a(d).velocity({top:"10%",opacity:1},{duration:c.in_duration,queue:false,ease:"easeOutCubic",complete:function(){if(typeof(c.ready)==="function"){c.ready();}}});}}});a.fn.extend({closeModal:function(b){var c={out_duration:250,complete:undefined};var b=a.extend(c,b);a(".modal-close").off();a(document).off("keyup.leanModal");a("#lean-overlay").velocity({opacity:0},{duration:b.out_duration,queue:false,ease:"easeOutQuart"});if(a(this).hasClass("bottom-sheet")){a(this).velocity({bottom:"-100%",opacity:0},{duration:b.out_duration,queue:false,ease:"easeOutCubic",complete:function(){a("#lean-overlay").css({display:"none"});if(typeof(b.complete)==="function"){b.complete();}a("#lean-overlay").remove();}});}else{a(this).fadeOut(b.out_duration,function(){a(this).css({top:0});a("#lean-overlay").css({display:"none"});if(typeof(b.complete)==="function"){b.complete();}a("#lean-overlay").remove();});}}});a.fn.extend({leanModal:function(b){return this.each(function(){a(this).click(function(d){var c=a(this).attr("href")||"#"+a(this).data("target");a(c).openModal(b);d.preventDefault();});});}});})(jQuery);