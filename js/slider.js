(function(a){a.fn.slider=function(b){var c={indicators:true,height:400,transition:500,interval:6000};b=a.extend(c,b);return this.each(function(){var k=a(this);var j=k.find("ul.slides").first();var i=j.find("li");var d=j.find(".active").index();var n;if(d!=-1){n=i.eq(d);}function l(o,p){if(o.hasClass("center-align")){o.velocity({opacity:0,translateY:-100},{duration:p,queue:false});}else{if(o.hasClass("right-align")){o.velocity({opacity:0,translateX:100},{duration:p,queue:false});}else{if(o.hasClass("left-align")){o.velocity({opacity:0,translateX:-100},{duration:p,queue:false});}}}}function m(o){if(o>=i.length){o=0;}else{if(o<0){o=i.length-1;}}d=j.find(".active").index();if(d!=o){n=i.eq(d);$caption=n.find(".caption");n.removeClass("active");n.velocity({opacity:0},{duration:b.transition,queue:false,easing:"easeOutQuad",complete:function(){i.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:false});}});l($caption,b.transition);if(b.indicators){g.eq(d).removeClass("active");}i.eq(o).velocity({opacity:1},{duration:b.transition,queue:false,easing:"easeOutQuad"});i.eq(o).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,delay:b.transition,queue:false,easing:"easeOutQuad"});i.eq(o).addClass("active");if(b.indicators){g.eq(o).addClass("active");}}}if(b.height!=400){k.height(b.height+40);j.height(b.height);}i.find(".caption").each(function(){l(a(this),0);});i.find("img").each(function(){a(this).css("background-image","url("+a(this).attr("src")+")");a(this).attr("src","data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");});if(b.indicators){var g=a('<ul class="indicators"></ul>');i.each(function(o){var p=a('<li class="indicator-item"></li>');p.click(function(){var r=j.parent();var q=r.find(a(this)).index();m(q);clearInterval($interval);$interval=setInterval(function(){d=j.find(".active").index();if(i.length==d+1){d=0;}else{d+=1;}m(d);},b.transition+b.interval);});g.append(p);});k.append(g);g=k.find("ul.indicators").find("li.indicator-item");}if(n){n.show();}else{i.first().addClass("active").velocity({opacity:1},{duration:b.transition,queue:false,easing:"easeOutQuad"});d=0;n=i.eq(d);if(b.indicators){g.eq(d).addClass("active");}}n.find("img").each(function(){n.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,queue:false,easing:"easeOutQuad"});});$interval=setInterval(function(){d=j.find(".active").index();m(d+1);},b.transition+b.interval);var e=false;var h=false;var f=false;k.hammer({prevent_default:false}).bind("pan",function(s){if(s.gesture.pointerType==="touch"){clearInterval($interval);var r=s.gesture.direction;var o=s.gesture.deltaX;var q=s.gesture.velocityX;$curr_slide=j.find(".active");$curr_slide.velocity({translateX:o},{duration:50,queue:false,easing:"easeOutQuad"});if(r===4&&(o>(k.innerWidth()/2)||q<-0.65)){f=true;}else{if(r===2&&(o<(-1*k.innerWidth()/2)||q>0.65)){h=true;}}var p;if(h){p=$curr_slide.next();if(p.length===0){p=i.first();}p.velocity({opacity:1},{duration:300,queue:false,easing:"easeOutQuad"});}if(f){p=$curr_slide.prev();if(p.length===0){p=i.last();}p.velocity({opacity:1},{duration:300,queue:false,easing:"easeOutQuad"});}}}).bind("panend",function(o){if(o.gesture.pointerType==="touch"){$curr_slide=j.find(".active");e=false;curr_index=j.find(".active").index();if(!f&&!h){$curr_slide.velocity({translateX:0},{duration:300,queue:false,easing:"easeOutQuad"});}else{if(h){m(curr_index+1);$curr_slide.velocity({translateX:-1*k.innerWidth()},{duration:300,queue:false,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:false});}});}else{if(f){m(curr_index-1);$curr_slide.velocity({translateX:k.innerWidth()},{duration:300,queue:false,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:false});}});}}}h=false;f=false;clearInterval($interval);$interval=setInterval(function(){d=j.find(".active").index();if(i.length==d+1){d=0;}else{d+=1;}m(d);},b.transition+b.interval);}});});};}(jQuery));